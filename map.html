<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/styles/main.css"/>
    <link rel="stylesheet" href="assets/styles/map.css"/>
    <title>FNB | Branch Locator</title>

    <link rel="stylesheet" href="http://yui.yahooapis.com/combo?pure/0.6.0/base-min.css&pure/0.6.0/grids-min.css&pure/0.6.0/grids-responsive-min.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/base-min.css">

    <script src="data/branch_locations.js"></script>
    <script src="data/deposit_atms.js"></script>
    <script src="data/free_atms.js"></script>
</head>
<body>
	<h3></h3>
    <div id="map"></div>
    <div id="legend"><h3>Legend</h3></div>
    <script>
      function initMap() {
      	
      	var branches = locations().marker;
      //	var deposits = deposits().marker;
      //	var atms = atms().marker;

      	var uluru = {"lat": 41.2587199, "lng": -95.9566695}



        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: uluru        });
		
        
        var icons = {
          branch: {
            name: 'Branch',
            icon: {
            	path: "M530 1244 c-106 -22 -220 -85 -298 -162 -115 -116 -172 -254 -172 -419 0 -114 19 -193 68 -288 46 -88 154 -198 239 -243 177 -94 399 -94 576 0 85 45 193 155 239 243 49 95 68 174 68 288 0 227 -121 426 -321 526 -45 23 -88 41 -95 41 -11 0 -14 -20 -14 -93 l0 -92 45 -24 c60 -32 141 -119 170 -184 127 -278 -76 -597 -380 -597 -304 0 -507 319 -380 597 43 94 161 197 263 228 l22 6 0 -245 0 -246 -55 0 -55 0 0 -58 0 -59 40 -12 c45 -13 106 -62 115 -92 6 -17 16 -19 81 -19 l74 0 0 454 0 454 -31 6 c-49 9 -128 6 -199 -10z",
	  			scale: 	0.02,
	  			strokeColor: '#006633',
	  			fillColor: '#006633',
	  			fillOpacity: 0.8,


            }
          },
          atm: {
            name: 'ATM',
      		icon: 
	  			{
	  			path: "M34.682 25.801c-1.438-1.134-3.596-2.04-6.474-2.717l-2.208-.521v-9.43l.299.122c1.874.949 2.881 2.745 3.019 4.745h7.516c-.137-4-1.615-6.958-4.434-9.048-1.873-1.389-4.009-2.282-6.4-2.732v-5.22h-7v5.06c-3.237.4-5.804 1.442-7.689 3.136-2.468 2.218-3.701 5.002-3.701 8.354 0 3.673 1.261 6.373 3.783 8.1 1.412.979 3.957 1.888 7.607 2.73v10.216c-1.331-.367-2.374-.971-3.109-1.844-.709-.848-1.184-1.752-1.426-3.752h-7.465c0 4 1.411 6.87 4.234 9.096 2.038 1.606 4.632 2.582 7.766 3.005v3.899h7v-3.833c3.333-.399 6.024-1.463 8.062-3.204 2.643-2.26 3.965-5.1 3.965-8.519 0-3.335-1.115-5.882-3.345-7.643zm-18.014-5.817c-1.215-.66-1.822-1.662-1.822-3 0-1.456.616-2.597 1.848-3.409.65-.429 1.424-.741 2.306-.947v8.224c-1.085-.316-1.868-.606-2.332-.868zm10.475 18.407c-.347.12-.734.219-1.143.306v-8.697c1.205.357 2.156.746 2.848 1.164 1.092.677 1.639 1.64 1.639 2.875-.001 2.116-1.116 3.573-3.344 4.352z",
	  			scale: 0.5,
	  			strokeColor: '#006633',
	  			fillColor: '#006633',
	  			fillOpacity: 0.8

	  			},
          }
        };

		var styledMapType = new google.maps.StyledMapType(
			 [
			  {
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#f5f5f5"
			      }
			    ]
			  },
			  {
			    "elementType": "labels.icon",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#616161"
			      }
			    ]
			  },
			  {
			    "elementType": "labels.text.stroke",
			    "stylers": [
			      {
			        "color": "#f5f5f5"
			      }
			    ]
			  },
			  {
			    "featureType": "administrative.land_parcel",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "administrative.land_parcel",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#bdbdbd"
			      }
			    ]
			  },
			  {
			    "featureType": "administrative.neighborhood",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "poi",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#eeeeee"
			      }
			    ]
			  },
			  {
			    "featureType": "poi",
			    "elementType": "labels.text",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "poi",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#757575"
			      }
			    ]
			  },
			  {
			    "featureType": "poi.business",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "poi.park",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#e5e5e5"
			      }
			    ]
			  },
			  {
			    "featureType": "poi.park",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#9e9e9e"
			      }
			    ]
			  },
			  {
			    "featureType": "road",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#ffffff"
			      }
			    ]
			  },
			  {
			    "featureType": "road",
			    "elementType": "labels",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "road",
			    "elementType": "labels.icon",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "road.arterial",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#757575"
			      }
			    ]
			  },
			  {
			    "featureType": "road.highway",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#dadada"
			      }
			    ]
			  },
			  {
			    "featureType": "road.highway",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#616161"
			      }
			    ]
			  },
			  {
			    "featureType": "road.local",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#9e9e9e"
			      }
			    ]
			  },
			  {
			    "featureType": "transit",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "transit.line",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#e5e5e5"
			      }
			    ]
			  },
			  {
			    "featureType": "transit.station",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#eeeeee"
			      }
			    ]
			  },
			  {
			    "featureType": "water",
			    "elementType": "geometry",
			    "stylers": [
			      {
			        "color": "#c9c9c9"
			      }
			    ]
			  },
			  {
			    "featureType": "water",
			    "elementType": "labels.text",
			    "stylers": [
			      {
			        "visibility": "off"
			      }
			    ]
			  },
			  {
			    "featureType": "water",
			    "elementType": "labels.text.fill",
			    "stylers": [
			      {
			        "color": "#9e9e9e"
			      }
			    ]
			  }
			], {name: 'Styled Map'});


	    //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');

        for (i = 0; i < branches.length; i ++ ){
        	var marker = new google.maps.Marker({
          		position: {
          			"lat": parseFloat(branches[i]["-lat"]),
          			"lng": parseFloat(branches[i]["-lng"])
          		},
          		icon: icons.branch.icon,
          		label: {
          			text: branches[i].label,
          			fontFamily: "Lucida Grande",
          			fontSize: "11px"
          		},
          		map: map
        	});
        }

        var legend = document.getElementById('legend');
        for (var key in icons) {
          var type = icons[key];
          var name = type.name;
          var icon = type.icon;
          var div = document.createElement('div');
          div.innerHTML = '<img src="' + icon + '"> ' + name;
          legend.appendChild(div);
        }

        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);

      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHo9YOCSVQJtZ54zGnnjuEi93gsK6aw8U&callback=initMap">
    </script>
</body>
</html>

